% monkeyB_NSP0_task = [sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171127(2).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171128(2).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171129(2).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171201(2).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171202(2).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171204(2).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171205(2).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171206(2).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171207(2).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171208(2).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171209(2).signal_corrmat),       sqmat2vec(output_simmats.ODR.Buzz.NSP0.sess_20180305(2).signal_corrmat), sqmat2vec(output_simmats.ODR.Buzz.NSP0.sess_20180307(2).signal_corrmat), sqmat2vec(output_simmats.ODR.Buzz.NSP0.sess_20180314(2).signal_corrmat), sqmat2vec(output_simmats.ODR.Buzz.NSP0.sess_20180315(2).signal_corrmat),          sqmat2vec(output_simmats.AL.Buzz.NSP0.sess_20171109(2).signal_corrmat), sqmat2vec(output_simmats.AL.Buzz.NSP0.sess_20171110(2).signal_corrmat), sqmat2vec(output_simmats.AL.Buzz.NSP0.sess_20171111(2).signal_corrmat), sqmat2vec(output_simmats.AL.Buzz.NSP0.sess_20171112(2).signal_corrmat), sqmat2vec(output_simmats.AL.Buzz.NSP0.sess_20171121(2).signal_corrmat), sqmat2vec(output_simmats.AL.Buzz.NSP0.sess_20171123(2).signal_corrmat)];
% monkeyB_NSP0_residuals = [sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171127(3).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171128(3).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171129(3).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171201(3).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171202(3).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171204(3).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171205(3).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171206(3).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171207(3).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171208(3).signal_corrmat), sqmat2vec(output_simmats.KM.Buzz.NSP0.sess_20171209(3).signal_corrmat),       sqmat2vec(output_simmats.ODR.Buzz.NSP0.sess_20180305(3).signal_corrmat), sqmat2vec(output_simmats.ODR.Buzz.NSP0.sess_20180307(3).signal_corrmat), sqmat2vec(output_simmats.ODR.Buzz.NSP0.sess_20180314(3).signal_corrmat), sqmat2vec(output_simmats.ODR.Buzz.NSP0.sess_20180315(3).signal_corrmat),          sqmat2vec(output_simmats.AL.Buzz.NSP0.sess_20171109(3).signal_corrmat), sqmat2vec(output_simmats.AL.Buzz.NSP0.sess_20171110(3).signal_corrmat), sqmat2vec(output_simmats.AL.Buzz.NSP0.sess_20171111(3).signal_corrmat), sqmat2vec(output_simmats.AL.Buzz.NSP0.sess_20171112(3).signal_corrmat), sqmat2vec(output_simmats.AL.Buzz.NSP0.sess_20171121(3).signal_corrmat), sqmat2vec(output_simmats.AL.Buzz.NSP0.sess_20171123(3).signal_corrmat)];
% 
% 
% monkeyT_NSP0_task = [sqmat2vec(output_simmats.ODR.Theo.NSP0.sess_20170726(2).signal_corrmat), sqmat2vec(output_simmats.ODR.Theo.NSP0.sess_20170802(2).signal_corrmat), sqmat2vec(output_simmats.ODR.Theo.NSP0.sess_20170810(2).signal_corrmat), sqmat2vec(output_simmats.ODR.Theo.NSP0.sess_20170815(2).signal_corrmat),       sqmat2vec(output_simmats.KM.Theo.NSP0.sess_20170614(2).signal_corrmat), sqmat2vec(output_simmats.KM.Theo.NSP0.sess_20170616(2).signal_corrmat), sqmat2vec(output_simmats.KM.Theo.NSP0.sess_20170622(2).signal_corrmat), sqmat2vec(output_simmats.KM.Theo.NSP0.sess_20170628(2).signal_corrmat), sqmat2vec(output_simmats.KM.Theo.NSP0.sess_20170705(2).signal_corrmat), sqmat2vec(output_simmats.KM.Theo.NSP0.sess_20170713(2).signal_corrmat), sqmat2vec(output_simmats.KM.Theo.NSP0.sess_20170717(2).signal_corrmat),   sqmat2vec(output_simmats.AL.Theo.NSP0.sess_20170329(2).signal_corrmat), sqmat2vec(output_simmats.AL.Theo.NSP0.sess_20170330(2).signal_corrmat), sqmat2vec(output_simmats.AL.Theo.NSP0.sess_20170331(2).signal_corrmat), sqmat2vec(output_simmats.AL.Theo.NSP0.sess_20170401(2).signal_corrmat), sqmat2vec(output_simmats.AL.Theo.NSP0.sess_20170403(2).signal_corrmat), sqmat2vec(output_simmats.AL.Theo.NSP0.sess_20170405(2).signal_corrmat), sqmat2vec(output_simmats.AL.Theo.NSP0.sess_20170406(2).signal_corrmat), sqmat2vec(output_simmats.AL.Theo.NSP0.sess_20170408(2).signal_corrmat), sqmat2vec(output_simmats.AL.Theo.NSP0.sess_20170413(2).signal_corrmat)
%     ];
% 
% monkeyT_NSP0_residuals = [sqmat2vec(output_simmats.ODR.Theo.NSP0.sess_20170726(3).signal_corrmat), sqmat2vec(output_simmats.ODR.Theo.NSP0.sess_20170802(3).signal_corrmat), sqmat2vec(output_simmats.ODR.Theo.NSP0.sess_20170810(3).signal_corrmat), sqmat2vec(output_simmats.ODR.Theo.NSP0.sess_20170815(3).signal_corrmat),       sqmat2vec(output_simmats.KM.Theo.NSP0.sess_20170614(3).signal_corrmat), sqmat2vec(output_simmats.KM.Theo.NSP0.sess_20170616(3).signal_corrmat), sqmat2vec(output_simmats.KM.Theo.NSP0.sess_20170622(3).signal_corrmat), sqmat2vec(output_simmats.KM.Theo.NSP0.sess_20170628(3).signal_corrmat), sqmat2vec(output_simmats.KM.Theo.NSP0.sess_20170705(3).signal_corrmat), sqmat2vec(output_simmats.KM.Theo.NSP0.sess_20170713(3).signal_corrmat), sqmat2vec(output_simmats.KM.Theo.NSP0.sess_20170717(3).signal_corrmat),   sqmat2vec(output_simmats.AL.Theo.NSP0.sess_20170329(3).signal_corrmat), sqmat2vec(output_simmats.AL.Theo.NSP0.sess_20170330(3).signal_corrmat), sqmat2vec(output_simmats.AL.Theo.NSP0.sess_20170331(3).signal_corrmat), sqmat2vec(output_simmats.AL.Theo.NSP0.sess_20170401(3).signal_corrmat), sqmat2vec(output_simmats.AL.Theo.NSP0.sess_20170403(3).signal_corrmat), sqmat2vec(output_simmats.AL.Theo.NSP0.sess_20170405(3).signal_corrmat), sqmat2vec(output_simmats.AL.Theo.NSP0.sess_20170406(3).signal_corrmat), sqmat2vec(output_simmats.AL.Theo.NSP0.sess_20170408(3).signal_corrmat), sqmat2vec(output_simmats.AL.Theo.NSP0.sess_20170413(3).signal_corrmat)
%     ];

% 

import utils_dx.*;

projectPath                         = setProjectPath();

MAT_output_simmates = fullfile(projectPath, 'results', 'topography', 'START_B6_topoInference_generation/output_simmats.mat');
output_simmats = load(MAT_output_simmates).output_simmats; 

taskStrs = {'ODR', 'KM', 'AL'};
subjectStrs = {'Buzz', 'Theo'};
arrayStr = 'NSP0'; 

monkeyB_NSP0_task = [];
monkeyB_NSP0_residuals = [];

monkeyT_NSP0_task = [];
monkeyT_NSP0_residuals = []; 

for subjectI=1:numel(subjectStrs)
    corrmats_task = [];
    corrmats_residuals = []; 
    for taskI = 1:numel(taskStrs)
        sessionStrs = fieldnames(output_simmats.(taskStrs{taskI}).(subjectStrs{subjectI}).(arrayStr)); 

        for sessI=1:numel(sessionStrs)
            % for task
            corrmat             = output_simmats.(taskStrs{taskI}).(subjectStrs{subjectI}).(arrayStr).(sessionStrs{sessI})(2).signal_corrmat;
            corrmat             = sqmat2vec(corrmat);
            corrmats_task       = [corrmats_task, corrmat]; 

            % for residual
            corrmat             = output_simmats.(taskStrs{taskI}).(subjectStrs{subjectI}).(arrayStr).(sessionStrs{sessI})(3).signal_corrmat;
            corrmat             = sqmat2vec(corrmat);
            corrmats_residuals  = [corrmats_residuals, corrmat]; 
        end % sessI        
    end % taskI
    if strcmp(subjectStrs{subjectI}, 'Buzz')
        monkeyB_NSP0_task       = corrmats_task;
        monkeyB_NSP0_residuals  = corrmats_residuals; 
    else
        monkeyT_NSP0_task       = corrmats_task;
        monkeyT_NSP0_residuals  = corrmats_residuals; 
    end
end % subjectI 

B_NSP0_task = mean(monkeyB_NSP0_task, 1, 'omitmissing'); 
B_NSP0_task_mean = mean(B_NSP0_task);
B_NSP0_task_std = std(B_NSP0_task);

B_NSP0_residuals = mean(monkeyB_NSP0_residuals, 1, 'omitmissing'); 
B_NSP0_residuals_mean = mean(B_NSP0_residuals);
B_NSP0_residuals_std = std(B_NSP0_residuals);

T_NSP0_task = mean(monkeyT_NSP0_task, 1, 'omitmissing'); 
T_NSP0_task_mean = mean(T_NSP0_task);
T_NSP0_task_std = std(T_NSP0_task);

T_NSP0_residuals = mean(monkeyT_NSP0_residuals, 1, 'omitmissing'); 
T_NSP0_residuals_mean = mean(T_NSP0_residuals);
T_NSP0_residuals_std = std(T_NSP0_residuals);
 
print('done');
